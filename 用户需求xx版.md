# 次世代多用户内容社区平台：融合文章、视频与问答的需求规格说明书
# 项目名：Corasta

**技术栈核心：** Vue.js 3 (前端) + Spring Boot 3 (后端)  
**目标平台：** PC Web端

---

## 目录

1. [项目概述](#1-项目概述)
2. [开发阶段规划](#2-开发阶段规划)
3. [技术架构](#3-技术架构)
4. [功能模块详细设计](#4-功能模块详细设计)
5. [非功能性需求](#5-非功能性需求)
6. [开发注意事项](#6-开发注意事项)
7. [附录](#7-附录)

---

## 1. 项目概述

### 1.1 项目简介

本项目旨在开发一个功能强大、体验现代的多用户内容社区平台。它不仅仅是一个传统的文章发布平台，而是深度融合了知乎（Zhihu）的知识问答社区模式和哔哩哔哩（Bilibili）的视频内容与弹幕互动生态，旨在为所有注册用户打造一个集深度文章、动态视频、互动问答于一体的综合性内容创作与交流平台。

所有注册用户都可以使用系统的全部功能，包括发布文章、视频、问答，进行评论、点赞、收藏、关注等互动操作，以及管理自己的内容和查看数据分析。用户将不再局限于单一的文本表达，而是可以通过多种媒介形式进行创作、分享和交流，从而构建一个更具活力和深度的内容社区。

### 1.2 核心设计理念

- **多维内容呈现：** 打破传统社区的单一内容结构，支持文章、视频、问答三种核心内容形态，让创作者能够根据思想和创意的不同，选择最合适的表达载体。
- **深度互动体验：** 借鉴B站的弹幕文化和知乎的知识讨论氛围，通过实时弹幕、分层评论区、问答投票等机制，极大地增强用户与内容、用户与创作者、以及用户之间的互动粘性。
- **用户为中心：** 所有注册用户都可以使用系统的全部功能，包括内容发布、管理、数据分析等，提供强大而易用的后台管理功能，赋能用户更好地创作内容、管理内容和运营自己的内容空间，并从中获得价值感和成就感。
- **社区化生态：** 这是一个多用户内容社区平台，通过关注、订阅、问答等功能，促进用户之间的连接，形成一个小型但高质量的知识与兴趣社区。
- **开发友好：** 在项目开发阶段，不设置后台管理员审核流程，便于快速测试和迭代。

### 1.3 用户角色定义

- **访客（Guest）：** 未登录用户，可以浏览公开内容，但无法进行互动操作。

- **注册用户（User/Content Creator）：** 所有注册用户都是内容创作者，拥有完整的系统权限，可以使用系统的所有功能：
  - 浏览内容、发表评论、提问、回答、点赞、收藏、关注其他用户
  - 发布和管理自己的文章、视频、问答
  - 查看自己内容的数据分析
  - 管理自己内容的评论、弹幕等
  - 访问内容管理后台，进行内容管理和数据分析
  - 查看自己的互动记录（点赞过的、评论过的内容）
  
  **权限边界：** 所有注册用户权限完全平等，都可以使用系统的全部功能，但只能管理自己的内容，无权修改其他用户的内容。已发布内容的用户是有内容的内容创作者，未发布内容的用户是空白内容创作者，但功能权限无任何区别。

- **超级管理员（Super Admin）** ⏳ *（第三阶段：待开发）*
  - 全站内容管理权限：对所有用户发布的内容进行审核、管理、删除等操作
  - 用户管理权限：对用户进行管理、封禁等操作
  - 系统设置权限：配置系统参数、管理分类标签等
  
  **说明：** 超级管理员功能将在第三阶段开发，当前阶段不设置后台管理员审核流程。

---

## 2. 开发阶段规划

### 2.1 第一阶段：核心功能开发（当前阶段）

**目标：** 完成基础用户系统和内容发布系统的核心功能，确保所有注册用户都可以使用系统的全部功能

**包含模块：**
- ✅ 用户中心模块（注册、登录、个人资料）
- ✅ 文章发布与管理模块
- ✅ 问答系统
- ✅ 内容浏览与基础互动（评论、点赞、收藏）
- ✅ 关注系统
- ✅ 通知系统
- ✅ 搜索功能（基础全文检索）
- ✅ 内容管理后台（内容管理、数据分析）

**预计完成时间：** 待定

### 2.2 第二阶段：视频功能开发（待开发）

**目标：** 实现完整的视频上传、处理、播放和弹幕系统

**包含模块：**
- ⏳ 视频上传系统（大文件上传、断点续传）
- ⏳ 视频转码服务（FFmpeg + HLS）
- ⏳ 视频播放器集成
- ⏳ 实时弹幕系统（WebSocket）
- ⏳ 视频管理后台
- ⏳ 视频相关搜索优化

**技术依赖：**
- FFmpeg（视频转码）
- 对象存储服务（MinIO/AWS S3）
- 消息队列（异步转码任务）
- WebSocket（实时弹幕推送）

**预计完成时间：** 待定

### 2.3 第三阶段：超级管理员功能开发（待开发）

**目标：** 实现超级管理员角色，提供全站内容管理、用户管理、审核等功能

**包含模块：**
- ⏳ 超级管理员角色与权限系统
- ⏳ 全站内容审核与管理
- ⏳ 用户管理（封禁、解封、权限调整等）
- ⏳ 系统设置与配置管理
- ⏳ 数据统计与分析（全站数据）

**预计完成时间：** 待定

---

## 3. 技术架构

### 3.1 前端技术栈

| 技术 | 版本/选型 | 用途说明 |
|------|----------|---------|
| Vue | 3.x | 核心框架 |
| Vite | 最新 | 构建工具 |
| Vue Router | 4.x | 路由管理 |
| Pinia | 3.x | 状态管理 |
| UI组件库 | Element Plus / Vuetify | PC端UI组件 |
| Axios | 最新 | HTTP请求库 |
| Markdown编辑器 | mavon-editor / Cherry Markdown | 文章编辑器 |
| 视频播放器 | DPlayer / ArtPlayer | 视频播放（第二阶段） |

### 3.2 后端技术栈

| 技术 | 版本/选型 | 用途说明 |
|------|----------|---------|
| Spring Boot | 3.x | 核心框架 |
| Java | 17+ | 开发语言 |
| Spring Data JPA | 最新 | 持久层框架 |
| MySQL | 8.0+ | 关系型数据库 |
| Elasticsearch | 最新 | 全文搜索引擎 |
| Spring WebSocket | 最新 | 实时通信（第二阶段） |
| FFmpeg | 最新 | 视频转码（第二阶段） |
| 对象存储 | MinIO / AWS S3 | 文件存储（第二阶段） |

### 3.3 系统架构设计原则

- **前后端分离：** 前端通过RESTful API与后端通信
- **模块化设计：** 各功能模块高内聚、低耦合，便于独立开发和测试
- **可扩展性：** 预留视频模块接口，便于第二阶段无缝集成
- **安全性：** 密码加密存储、JWT认证、输入校验、SQL注入防护

---

## 4. 功能模块详细设计

**说明：** 本章节详细描述各功能模块的设计，每个模块包含模块职责、模块边界、功能点等。模块之间通过接口通信，保持高内聚、低耦合的设计原则。

### 4.1 用户中心模块

**模块职责：** 用户身份认证、个人资料管理、密码安全

**模块边界：** 独立模块，为其他模块提供用户认证和基础信息

#### 4.1.1 用户注册

**需求描述：** 提供简化的用户注册流程，支持用户名/密码注册和密保问题设置。

**用户故事：**
- 作为一名新访客，我希望可以通过设置一个独特的用户名和密码来快速注册一个账号，以便发表评论和关注我喜欢的用户。

**功能点：**
- **注册页面：**
  - 用户名输入框（必填，4-20字符，支持字母、数字、下划线）
  - 密码输入框（必填，8-32字符，包含字母和数字）
  - 确认密码输入框（必填，需与密码一致）
  - 图片验证码（防止恶意注册）
  - 密保问题设置（可选，最多3个，每个包含问题和答案）
- **前端校验：**
  - 实时校验用户名格式和长度
  - 实时校验密码强度
  - 实时校验两次密码是否一致
  - 验证码校验
- **后端处理：**
  - 用户名唯一性校验（数据库查询）
  - 密码加密存储（使用明文）
  - 密保问题加密存储
  - 返回注册结果（成功/失败及原因）

#### 4.1.2 用户登录

**需求描述：** 提供安全的用户登录功能，支持图片验证码防暴力破解。

**用户故事：**
    - 作为已注册用户，我希望可以通过输入我的用户名和密码来登录系统，以便管理我的内容和个人信息。

**功能点：**
- **登录页面：**
  - 用户名输入框
  - 密码输入框
  - 图片验证码输入框
  - "记住我"选项（可选，7天免登录）
- **前端校验：**
  - 非空校验
  - 验证码校验
- **后端处理：**
  - 用户名和密码验证
  - 验证码校验
  - 生成JWT Token（包含用户ID、用户名等信息）
  - 记录登录日志（IP、时间等）
  - 返回Token和用户基本信息

#### 4.1.3 密码管理

**需求描述：** 支持用户修改密码和通过密保问题找回密码。

**用户故事：**
- 我觉得现在的密码不安全，想修改我的密码，可以通过输入旧密码来重置密码。
- 如果我忘记了我的密码，我希望可以通过回答我之前设置的密保问题来进行密码重置。

**功能点：**
- **修改密码：**
  - 旧密码输入框
  - 新密码输入框
  - 确认新密码输入框
  - 前端校验新密码强度
  - 后端校验旧密码正确性
  - 更新密码，使用明文存储
- **找回密码：**
  - 输入用户名
  - 回答设置的密保问题（最多3个，需全部答对）
  - 设置新密码
  - 后端验证密保答案
  - 更新密码，使用明文存储

#### 4.1.4 个人资料管理

**需求描述：** 用户可编辑个人资料，展示个性化信息。

**用户故事：**
- 作为一名用户，我希望能上传我的头像，设置我的昵称，并写一段个人简介，让其他用户更好地了解我。

**功能点：**
- **资料编辑：**
  - 头像上传（支持JPG、PNG，最大2MB，自动压缩）
  - 昵称设置（1-20字符）
  - 个人简介/签名（0-200字符，支持Markdown）
  - 保存按钮
- **个人主页展示：**
  - 用户头像、昵称、简介
  - 内容聚合列表（文章、问答、回答）
  - 粉丝数、关注数、获赞总数
  - 关注按钮（其他用户可见）
- **隐私设置：**
  - 主页可见性设置（公开/仅关注者可见）
  - 内容可见性设置（文章、问答等）

---

### 4.2 文章发布与管理模块

**模块职责：** 文章的创建、编辑、发布、管理

**模块边界：** 独立模块，依赖用户中心模块（获取作者信息）

#### 4.2.1 文章编辑器

**需求描述：** 提供功能丰富的Markdown编辑器，支持实时预览和多种内容嵌入。

**用户故事：**
- 作为一名用户，我希望能在一个所见即所得的编辑器里撰写文章，轻松插入代码块、图片，并能随时保存草稿，最终发布一篇排版精美的技术文章。

**功能点：**
- **编辑器功能：**
  - Markdown实时预览（分屏模式）
  - 全屏写作模式
  - 自动保存草稿（每30秒或失去焦点时）
  - 快捷键支持（Ctrl+S保存，Ctrl+B加粗等）
- **内容支持：**
  - Markdown全功能支持（标题、列表、引用、粗体、斜体、链接、表格等）
  - 代码块语法高亮（支持主流编程语言）
  - 图片上传（拖拽上传、粘贴上传、点击上传）
  - 图片预览和删除
  - 数学公式支持（LaTeX语法，可选）
- **文章元数据：**
  - 文章标题（必填，1-100字符）
  - 文章摘要（可选，0-200字符）
  - 封面图上传（支持JPG、PNG，建议尺寸1200x630）
  - 分类选择（单选，支持自定义分类）
  - 标签设置（多选，最多10个，支持自动补全）
  - 自定义URL（Slug，可选，用于SEO友好的URL）
  - 发布状态选择（草稿/立即发布/定时发布）

#### 4.2.2 文章管理

**需求描述：** 用户可管理自己发布的所有文章，包括查看、编辑、删除、状态变更等。

**权限说明：** 用户只能管理自己发布的内容，无权修改其他用户的内容。详见1.3节权限边界说明。

**功能点：**
- **文章列表：**
  - 展示所有文章（已发布、草稿、私密）
  - 列表信息：标题、封面、分类、标签、发布时间、阅读量、点赞数、评论数
  - 支持按状态、分类、标签筛选
  - 支持按时间、阅读量、点赞数排序
  - 支持关键词搜索（标题、内容）
- **文章操作：**
  - 编辑文章（跳转到编辑器）
  - 删除文章（需二次确认，支持批量删除）
  - 更改状态（发布/私密/草稿）
  - 复制文章（创建副本）
  - 查看文章详情页
- **批量操作：**
  - 批量删除
  - 批量更改状态
  - 批量修改分类/标签

#### 4.2.3 文章浏览

**需求描述：** 用户可浏览已发布的文章，提供良好的阅读体验。

**功能点：**
- **文章详情页：**
  - 文章标题、作者信息、发布时间
  - 文章封面图
  - 文章目录导航（自动生成，支持锚点跳转）
  - 文章正文（Markdown渲染）
  - 代码块复制功能
  - 图片灯箱查看（点击放大）
  - 文章底部信息（分类、标签、阅读量、点赞数、收藏数）
- **互动功能：**
  - 点赞按钮（已点赞高亮）
  - 收藏按钮（已收藏高亮）
  - 分享按钮（生成分享链接）
  - 评论入口
- **相关推荐：**
  - 同分类文章推荐
  - 同标签文章推荐
  - 作者其他文章推荐

---

### 4.3 问答系统模块

**模块职责：** 问题的创建、回答、投票、管理

**模块边界：** 独立模块，依赖用户中心模块（获取用户信息）

#### 4.3.1 提问功能

**需求描述：** 用户可创建问题，包含标题、描述和标签。

**用户故事：**
- 作为一名访客，我在阅读某位用户的文章后产生了一个疑问，但是评论区发表问题容易被挤下去，所以我希望系统可以单开一个模块，在该用户的主页或内容空间里提出这个问题，并期待该用户或其他用户能给我解答。

**功能点：**
- **提问页面：**
  - 问题标题输入框（必填，1-100字符）
  - 问题详细描述（必填，支持Markdown，0-5000字符）
  - 标签选择（多选，最多5个，支持创建新标签）
  - 关联文章选择（可选，可关联到某篇文章）
  - 提交按钮
- **前端校验：**
  - 标题非空和长度校验
  - 描述非空和长度校验
  - 标签数量校验
- **后端处理：**
  - 保存问题到数据库
  - 创建标签（如不存在）
  - 发送通知给被提问的用户（如有关联文章）

#### 4.3.2 回答功能

**需求描述：** 用户可对问题进行回答，支持富文本和图片。

**用户故事：**
- 作为内容创作者，我希望看到我的读者们提出的问题，并能撰写详细的回答来分享我的知识，这也能成为我内容创作的一部分。

**功能点：**
- **回答编辑器：**
  - 富文本编辑器（与文章编辑器类似，简化版）
  - 支持Markdown语法
  - 支持图片上传
  - 支持代码块
  - 实时预览
- **回答提交：**
  - 回答内容（必填，支持Markdown，0-10000字符）
  - 提交按钮
  - 保存草稿功能
- **回答展示：**
  - 回答者信息（头像、昵称）
  - 回答内容（Markdown渲染）
  - 回答时间
  - 赞同数、反对数
  - 评论数

#### 4.3.3 问答互动机制

**需求描述：** 支持对回答进行投票、排序、邀请回答等互动。

**功能点：**
- **投票功能：**
  - 赞同按钮（点击赞同，再次点击取消）
  - 反对按钮（点击反对，再次点击取消）
  - 显示赞同数和反对数
  - 已投票状态高亮显示
- **回答排序：**
  - 默认按赞同数降序排序
  - 支持按时间排序（最新/最早）
  - 支持按热度排序（综合赞同数、评论数、时间）
- **邀请回答：**
  - 提问者或内容作者可邀请特定用户回答问题
  - 被邀请用户收到通知
- **最佳回答：**
  - 提问者或内容作者可标记某个回答为"最佳回答"
  - 最佳回答置顶显示

#### 4.3.4 问答浏览与管理

**需求描述：** 用户可浏览问题列表和详情，用户可管理自己相关的问题（自己提出的问题、自己发布的回答）。

**权限说明：** 用户只能管理自己的内容，无权修改其他用户的问题和回答。详见1.3节权限边界说明。

**功能点：**
- **问题列表页：**
  - 展示所有问题（标题、描述摘要、标签、提问者、回答数、关注数）
  - 支持按标签筛选
  - 支持按时间、热度、回答数排序
  - 支持关键词搜索
- **问题详情页：**
  - 问题标题和详细描述
  - 问题标签
  - 提问者信息
  - 回答列表（按排序规则显示）
  - 回答输入框
- **问答管理：**
  - 用户可查看与自己相关的问题（被提问、已回答）
  - 用户可删除自己提出的问题
  - 用户可删除自己发布的回答

---

### 4.4 内容互动模块

**模块职责：** 评论、点赞、收藏、分享等互动功能

**模块边界：** 独立模块，可被文章、问答、视频模块调用。与4.7.2的区别：本模块提供互动功能的实现，4.7.2提供用户查看自己互动记录的入口。

#### 4.4.1 评论系统

**需求描述：** 支持对文章、回答进行评论，支持二级评论（回复评论）。

**功能点：**
- **评论功能：**
  - 评论输入框（支持Markdown，0-1000字符）
  - 提交评论按钮
  - 评论列表展示（支持分页）
  - 回复评论功能（点击回复，输入框自动@被回复用户）
- **评论展示：**
  - 评论者信息（头像、昵称）
  - 评论内容（Markdown渲染）
  - 评论时间
  - 点赞数
  - 回复按钮
  - 二级评论折叠/展开
- **评论排序：**
  - 按时间排序（最新/最早）
  - 按热度排序（综合点赞数、回复数、时间）
- **评论互动：**
  - 点赞评论（已点赞高亮）
  - 回复评论（二级评论）
  - 内容作者可置顶评论（仅一条，有置顶标识）
  - 内容作者可删除自己内容下的评论
  - 用户可以编辑和删除自己发表的评论

**权限说明：** 用户只能管理自己的评论，无权修改其他用户的评论。详见1.3节权限边界说明。

#### 4.4.2 点赞与收藏

**需求描述：** 用户可对内容进行点赞和收藏操作。

**功能点：**
- **点赞功能：**
  - 支持对文章、回答、评论进行点赞
  - 点赞按钮（已点赞高亮显示）
  - 显示点赞总数
  - 点击切换点赞状态（点赞/取消点赞）
- **收藏功能：**
  - 支持对文章、回答进行收藏
  - 收藏按钮（已收藏高亮显示）
  - 显示收藏总数
  - 收藏到收藏夹（支持创建多个收藏夹）
  - 收藏夹管理（创建、重命名、删除）
  - 查看我的收藏列表

#### 4.4.3 分享功能

**需求描述：** 用户可将内容分享到其他平台或生成分享链接。

**功能点：**
- **分享方式：**
  - 复制链接（生成短链接）
  - 分享到社交平台（微信、微博、QQ等，通过分享API）
  - 生成分享图片（二维码+标题+摘要）
- **分享统计：**
  - 记录分享次数
  - 分享来源统计（可选）

---

### 4.5 社区与社交模块

**模块职责：** 用户关注、动态Feed、通知系统

**模块边界：** 独立模块，依赖用户中心模块

#### 4.5.1 关注系统

**需求描述：** 用户可以关注其他用户，形成关注关系网络。

**功能点：**
- **关注功能：**
  - 关注按钮（在用户主页、内容页显示）
  - 点击关注/取消关注
  - 显示关注状态（已关注/未关注）
  - 显示粉丝数和关注数
- **关注管理：**
  - 我的关注列表（展示关注的用户）
  - 我的粉丝列表（展示关注我的用户）
  - 支持取消关注
  - 支持移除粉丝（可选）
- **关注通知：**
  - 被关注时，用户收到通知
  - 通知类型：新粉丝

#### 4.5.2 动态Feed流

**需求描述：** 用户登录后，首页展示关注的用户最新发布的动态。

**功能点：**
- **Feed流内容：**
  - 展示关注的用户最新发布的文章
  - 展示关注的用户最新发布的回答
  - 展示关注的用户最新发布的视频（第二阶段）
  - 按时间倒序排列
  - 支持分页加载
- **内容卡片：**
  - 作者信息（头像、昵称）
  - 内容标题和摘要
  - 内容封面图
  - 发布时间
  - 互动数据（点赞数、评论数）
  - 快速操作（点赞、收藏、评论）
- **Feed流筛选：**
  - 全部动态
  - 仅文章
  - 仅问答
  - 仅视频（第二阶段）

#### 4.5.3 通知系统

**需求描述：** 聚合所有与用户相关的通知，及时提醒用户。

**功能点：**
- **通知类型：**
  - 新评论/回复（有人评论了我的内容或回复了我的评论）
  - 新点赞（有人点赞了我的内容或评论）
  - 新粉丝（有人关注了我）
  - 新回答（有人回答了我提出的问题）
  - 回答被采纳（我的回答被标记为最佳回答）
  - 被邀请回答（有人邀请我回答问题）
- **通知中心：**
  - 右上角通知图标，显示未读数量（小红点）
  - 点击进入通知列表页
  - 通知列表（按时间倒序）
  - 未读/已读状态区分
  - 标记全部已读功能
  - 点击通知跳转到相关内容
- **通知设置：**
  - 可设置哪些类型的通知需要提醒
  - 可设置通知方式（站内通知/邮件通知，邮件功能可选）

---

### 4.6 搜索模块

**模块职责：** 全站内容搜索、结果展示、高级筛选

**模块边界：** 独立模块，依赖Elasticsearch，可搜索所有内容类型

#### 4.6.1 全站搜索引擎

**需求描述：** 提供强大的站内搜索引擎，支持全文检索和高级筛选。

**用户故事：**
- 我想学习关于"微服务架构"的知识，我希望可以在搜索框输入这个关键词，系统能返回所有相关的文章、视频和高质量的问答。

**功能点：**
- **搜索功能：**
  - 搜索框（支持关键词输入）
  - 搜索建议（输入时显示热门搜索词）
  - 搜索历史（最近10条）
  - 热门搜索词展示
- **搜索范围：**
  - 文章（标题、内容、标签）
  - 问答（问题标题、描述、回答内容）
  - 视频（标题、简介、标签，第二阶段）
  - 用户（用户名、昵称）
- **搜索结果：**
  - 结果分类展示（文章、问答、视频、用户）
  - 每个分类显示前N条结果
  - 高亮显示关键词
  - 显示结果摘要
  - 显示相关度评分
- **高级筛选：**
  - 按内容类型筛选（全部/文章/问答/视频）
  - 按时间排序（最新/最旧）
  - 按热度排序（综合阅读量、点赞数、评论数）
  - 按分类筛选
  - 按标签筛选
  - 按作者筛选

---

### 4.7 内容管理后台模块

**模块职责：** 用户个人内容管理、互动记录查看、数据分析

**模块边界：** 独立模块，所有注册用户都可以访问和使用，用于管理自己的内容和查看互动记录。与4.2、4.3模块的区别：本模块提供统一的管理入口和数据分析，而4.2、4.3是具体的内容发布和管理功能。

#### 4.7.1 内容管理仪表盘

**需求描述：** 所有注册用户都可以访问统一的仪表盘，集中查看和管理自己发布的所有类型的内容。

**功能点：**
- **内容概览：**
  - 内容统计卡片（文章数、问答数、视频数、草稿数）
  - 最近发布的内容列表
  - 待处理事项（如有未回答的问题）
- **内容列表：**
  - 文章列表（跳转到4.2.2文章管理页面）
  - 问答列表（跳转到4.3.4问答管理页面）
  - 视频列表（第二阶段，跳转到视频管理页面）
  - 统一的内容筛选和搜索（仅搜索自己的内容）
- **批量操作：**
  - 批量删除（仅限自己的内容）
  - 批量更改状态（仅限自己的内容）
  - 批量修改分类/标签（仅限自己的内容）

**模块关系：** 具体的文章、问答、视频管理功能详见4.2.2、4.3.4、4.8.3章节，本模块提供统一的入口和概览。

#### 4.7.2 我的互动记录

**需求描述：** 用户可以查看自己的所有互动记录，包括点赞过的、评论过的、回答过的、收藏过的内容。这是用户在自己的主页查看自己参与的所有互动。

**模块关系：** 互动功能的实现详见4.4内容互动模块，本模块提供统一的记录查看入口。

**功能点：**
- **点赞记录：**
  - 查看所有点赞过的文章、视频、问答、回答、评论
  - 支持按内容类型筛选（文章/视频/问答/回答/评论）
  - 支持按时间排序
  - 支持取消点赞（从记录中移除）
- **评论记录：**
  - 查看所有自己发表的评论和回复
  - 查看评论所在的内容（文章/视频/问答/回答）
  - 支持按时间排序
  - 支持编辑和删除自己的评论
- **回答记录：**
  - 查看所有自己回答过的问题
  - 支持按时间、赞同数排序
  - 支持编辑和删除自己的回答
- **收藏记录：**
  - 查看所有收藏过的内容
  - 支持按收藏夹分类查看
  - 支持按时间排序
  - 支持取消收藏

#### 4.7.3 数据分析仪表盘

**需求描述：** 所有注册用户都可以查看自己内容的数据分析，以可视化方式展示内容的核心数据指标。

**功能点：**
- **核心指标：**
  - 总访问量（PV）
  - 独立访客数（UV）
  - 总粉丝数
  - 总点赞数
  - 总收藏数
  - 总评论数
- **内容分析：**
  - 单篇文章/视频/问答的详细数据：
    - 阅读量/播放量
    - 点赞数
    - 评论数
    - 收藏数
    - 分享数
    - 阅读时长（文章）
    - 播放时长（视频）
  - 内容排行（按阅读量、点赞数、评论数）
- **趋势分析：**
  - 访问量趋势图（按日/周/月）
  - 粉丝增长趋势图
  - 内容发布趋势图
- **用户分析：**
  - 粉丝来源分析（可选）
  - 用户活跃度分析（可选）

---

### 4.8 视频模块（第二阶段：待开发）

**模块职责：** 视频上传、转码、播放、弹幕系统

**模块边界：** 独立模块，依赖用户中心模块，与文章模块可关联

#### 4.8.1 视频上传系统 ⏳

**需求描述：** 支持大文件视频上传，提供断点续传功能。

**功能点：**
- **上传功能：**
  - 视频文件选择（支持MP4、AVI、MOV等格式）
  - 文件大小限制（如最大5GB）
  - 上传进度条显示
  - 断点续传（网络中断后可从断点继续）
  - 多文件上传（可选）
- **上传前处理：**
  - 文件格式校验
  - 文件大小校验
  - 视频时长显示
  - 视频预览（第一帧）
- **后端处理：**
  - 接收视频文件
  - 存储到临时目录
  - 返回上传结果和视频ID

#### 4.8.2 视频转码服务 ⏳

**需求描述：** 使用FFmpeg将视频转码为HLS格式，支持多清晰度。

**功能点：**
- **转码任务：**
  - 异步转码（使用消息队列）
  - 转码状态跟踪（等待中/转码中/完成/失败）
  - 转码进度显示
- **转码配置：**
  - 多清晰度转码（1080p、720p、480p）
  - HLS格式输出（.m3u8索引文件 + .ts切片文件）
  - 视频编码参数优化
- **存储方案：**
  - 转码后的文件存储到对象存储（MinIO/S3）
  - 生成视频访问URL
  - 清理临时文件

**技术实现：**
- 使用FFmpeg进行转码
- 使用消息队列（如RabbitMQ）处理异步任务
- 使用对象存储服务存储视频文件

#### 4.8.3 视频信息管理 ⏳

**需求描述：** 视频元数据编辑和管理。

**功能点：**
- **视频信息编辑：**
  - 视频标题（必填，1-100字符）
  - 视频简介（支持Markdown，0-2000字符）
  - 分区/分类选择
  - 标签设置（多选，最多10个）
  - 封面图设置（自动截取或手动上传）
  - 关联文章（可选，实现图文视频联动）
- **视频状态管理：**
  - 转码中
  - 转码失败
  - 已发布
  - 私密
  - 草稿
- **视频管理：**
  - 视频列表展示
  - 编辑视频信息
  - 删除视频
  - 更改视频状态

#### 4.8.4 视频播放器 ⏳

**需求描述：** 集成Web视频播放器，支持HLS协议播放。

**功能点：**
- **播放器功能：**
  - HLS协议支持
  - 清晰度切换（1080p、720p、480p）
  - 播放速度调整（0.5x、1x、1.25x、1.5x、2x）
  - 音量控制
  - 全屏播放
  - 播放进度条
  - 播放/暂停
- **播放器UI：**
  - 播放器控制栏
  - 清晰度选择菜单
  - 播放速度选择菜单
  - 全屏按钮
- **播放统计：**
  - 记录播放量
  - 记录播放时长
  - 记录播放进度（用于续播）

**技术实现：**
- 使用DPlayer或ArtPlayer
- 支持HLS.js播放HLS流

#### 4.8.5 实时弹幕系统 ⏳

**需求描述：** 在视频播放时，用户可以发送实时弹幕，通过WebSocket实时推送。

**功能点：**
- **弹幕发送：**
  - 弹幕输入框（播放器下方）
  - 弹幕内容（0-50字符）
  - 弹幕颜色选择（预设颜色或自定义）
  - 弹幕位置选择（滚动/顶部/底部）
  - 发送按钮
- **弹幕渲染：**
  - 在正确的时间点显示弹幕
  - 弹幕从右到左滚动（滚动模式）
  - 弹幕固定在顶部/底部（固定模式）
  - 弹幕样式（颜色、字体大小）
- **弹幕加载：**
  - 进入视频时，加载该视频的所有历史弹幕
  - 按时间轴组织弹幕数据
  - 弹幕密度控制（避免遮挡）
- **实时通信：**
  - 用户发送新弹幕时，通过WebSocket实时推送给所有正在观看该视频的用户
  - 弹幕同步（所有用户看到相同的弹幕）
- **弹幕管理：**
  - 视频作者可查看自己视频的所有弹幕
  - 视频作者可删除自己视频下的恶意弹幕
  - 弹幕举报功能（可选）

**技术实现：**
- 前端：WebSocket客户端
- 后端：Spring WebSocket
- 弹幕存储：数据库存储弹幕内容、时间、位置等信息

---

### 4.9 超级管理员模块（第三阶段：待开发）

**模块职责：** 全站内容管理、用户管理、审核、系统配置

**模块边界：** 独立模块，仅超级管理员可访问，用于全站管理和维护

#### 4.9.1 全站内容管理 ⏳

**需求描述：** 超级管理员可以对全站所有用户发布的内容进行审核、管理、删除等操作。

**功能点：**
- **内容审核：**
  - 查看所有待审核的内容（文章、视频、问答）
  - 审核通过/拒绝内容
  - 添加审核备注
  - 批量审核操作
- **内容管理：**
  - 查看全站所有内容（文章、视频、问答）
  - 编辑任何用户的内容（紧急情况）
  - 删除违规内容
  - 批量删除内容
  - 内容状态管理（发布/下架/隐藏）
- **内容统计：**
  - 全站内容总数统计
  - 按类型统计（文章/视频/问答）
  - 按状态统计（已发布/草稿/待审核/已删除）
  - 内容增长趋势

#### 4.9.2 用户管理 ⏳

**需求描述：** 超级管理员可以对所有用户进行管理，包括封禁、解封、权限调整等。

**功能点：**
- **用户列表：**
  - 查看所有注册用户
  - 用户信息展示（用户名、昵称、注册时间、最后登录时间）
  - 用户状态（正常/已封禁）
  - 用户内容统计（发布数、粉丝数等）
- **用户操作：**
  - 封禁用户（禁止登录、禁止发布内容）
  - 解封用户
  - 删除用户（可选，需谨慎）
  - 重置用户密码（紧急情况）
  - 查看用户详细信息
- **用户统计：**
  - 总用户数
  - 活跃用户数（按日/周/月）
  - 新注册用户趋势
  - 用户增长趋势

#### 4.9.3 系统设置与配置 ⏳

**需求描述：** 超级管理员可以配置系统参数、管理分类标签等。

**功能点：**
- **分类管理：**
  - 创建、编辑、删除内容分类
  - 分类排序
  - 分类使用统计
- **标签管理：**
  - 查看所有标签
  - 合并重复标签
  - 删除无用标签
  - 标签使用统计
- **系统参数配置：**
  - 系统基本设置
  - 内容审核规则配置
  - 用户注册规则配置
  - 其他系统参数

#### 4.9.4 数据统计与分析（全站）⏳

**需求描述：** 超级管理员可以查看全站的数据统计和分析。

**功能点：**
- **全站数据概览：**
  - 总用户数、总内容数
  - 总访问量（PV）、独立访客数（UV）
  - 总点赞数、总评论数、总收藏数
- **内容分析：**
  - 热门内容排行（按阅读量、点赞数、评论数）
  - 内容类型分布
  - 内容增长趋势
- **用户分析：**
  - 活跃用户排行
  - 用户增长趋势
  - 用户地域分布（可选）
- **互动分析：**
  - 互动数据趋势
  - 热门话题分析
  - 用户参与度分析

---

## 5. 非功能性需求

### 5.1 性能需求

- **响应时间：**
  - 页面加载时间 < 2秒
  - API响应时间 < 500ms（普通查询）
  - API响应时间 < 2秒（复杂查询）
- **并发支持：**
  - 支持至少100并发用户
  - 支持至少1000并发请求/秒
- **数据库性能：**
  - 数据库查询优化（索引、分页）
  - 避免N+1查询问题
- **前端性能：**
  - 代码分割和懒加载
  - 图片懒加载和压缩
  - 静态资源CDN加速（可选）

### 5.2 安全性需求

- **身份认证：**
  - 密码加密存储（BCrypt，不存储明文）
  - JWT Token认证
  - Token过期机制（如7天）
  - 密码强度要求（8-32字符，包含字母和数字）
- **输入校验：**
  - 前端输入校验
  - 后端参数校验（使用Bean Validation）
  - SQL注入防护（使用参数化查询）
  - XSS防护（内容转义）
- **文件上传安全：**
  - 文件类型校验
  - 文件大小限制
  - 文件名安全处理（防止路径遍历）
  - 病毒扫描（可选）
- **API安全：**
  - 接口权限控制（基于角色）
  - 频率限制（防止暴力破解）
  - CORS配置

### 5.3 可用性需求

- **系统可用性：**
  - 系统正常运行时间 > 99%
  - 错误处理和友好提示
  - 异常日志记录
- **用户体验：**
  - 响应式设计（适配不同屏幕尺寸）
  - 友好的错误提示
  - 加载状态提示
  - 操作确认（删除等危险操作）

### 5.4 可维护性需求

- **代码质量：**
  - 代码规范（ESLint、Checkstyle）
  - 代码注释
  - 单元测试覆盖率 > 60%
- **文档：**
  - 接口文档（Swagger/OpenAPI）
  - 数据模型设计文档
  - 部署文档

### 5.5 可扩展性需求

- **模块化设计：**
  - 高内聚、低耦合
  - 接口抽象，便于扩展
- **数据模型设计：**
  - 合理的数据结构设计
  - 预留扩展字段
- **视频模块预留：**
  - 预留视频相关接口
  - 数据模型设计考虑视频字段

---

## 6. 开发注意事项

### 6.1 第一阶段开发重点

1. **用户系统：** 确保密码安全（BCrypt加密），JWT认证机制完善
2. **文章系统：** Markdown编辑器集成，图片上传功能，评论系统
3. **问答系统：** 问题创建、回答、投票机制
4. **基础互动：** 点赞、收藏、评论功能
5. **搜索功能：** 基础全文检索（可先用MySQL LIKE，后续升级Elasticsearch）

### 6.2 第二阶段开发准备

1. **接口预留：** 在设计接口时，考虑视频模块的接口规范
2. **数据预留：** 在相关数据模型中预留视频字段或使用关联关系
3. **存储方案：** 提前规划对象存储方案（MinIO本地部署或云存储）
4. **消息队列：** 提前引入消息队列（RabbitMQ/Redis），用于异步转码任务

### 6.3 模块开发原则

- **高内聚：** 每个模块功能完整，职责单一
- **低耦合：** 模块间通过接口通信，避免直接依赖
- **接口抽象：** 定义清晰的接口规范，便于测试和扩展
- **错误处理：** 统一的错误处理机制，友好的错误提示

---

## 7. 附录

### A. 术语表

- **PV (Page View)：** 页面访问量
- **UV (Unique Visitor)：** 独立访客数
- **HLS (HTTP Live Streaming)：** HTTP实时流媒体协议
- **Slug：** URL友好的字符串标识符
- **JWT (JSON Web Token)：** JSON格式的Web令牌，用于身份认证

### B. 参考资源

- Vue 3 官方文档：https://vuejs.org/
- Spring Boot 官方文档：https://spring.io/projects/spring-boot
- Markdown语法：https://www.markdownguide.org/
- FFmpeg文档：https://ffmpeg.org/documentation.html

---

**文档结束**
